<?php
$conn = mysqli_connect("localhost","root","","class_db");

$first = $_POST['fname'];
$last = $_POST['lname'];

// ERROR: Inserted direcTly on an empty input results to blank rows
// $sql = "INSERT INTO students (first_name,last_name) VALUES ('$first','$last')";
// mysqli_query($conn, $sql);

// CORRECT: make sure the inputs are defined
if(!empty($first) && !empty($last)) {

    // prepared statement for safe execution
    $stmt = $conn->prepare("INSERT INTO students (first_name, last_name) VALUES (?, ?)");
    $stmt->bind_param("ss", $first, $last); // "ss" = 2 strings
    $stmt->execute();

    echo "Inserted!";
} else {
    echo "Error: Please fill in all fields!";
}

/*
i added a check to verify that the fname and lname are not empty before executing INSERT command . if the inputs are empty ,
it will display an error result
using a prepared statement makes the execution safer annd protect the database from SQL injection
*/
?>
